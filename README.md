# Календарь бронирования с ограничениями

Скрипт выполнен в рамках тестового задания.

Общее описание задачи: посетители на сайте бронируют посещение. Если кол-во броней на одну дату(?) больше или равно 5 (параметр N, описанный ниже), то они не могут выбрать в календаре дату.
Чтобы понять, есть ли уже 5 посещений на нужную дату или нет, мы делаем обращение к API платформы Yadro и выбираем из amoCRM сделки на определенных статусах (несколько), и проверяем какая дата у них заполнена.

Входной параметр - ИД доп. поля с датой; ИД статуса сделки (несколько).(Что такое ИД доп. поля с датой?)

В первую очередь нужно написать функцию, которая будет отдавать количество сделок на определенных статусах с определенным значением поля типа даты (поле типа даты - это любое одно доп. поле в Сделке с типом Дата. Если его нет, то для себя для тестов нужно создать вручную в amoCRM). Условно, "покажи, сколько сделок на статусе таком и таком с значением поля равным 25.06.16".

Затем нужно адаптировать, чтобы значения отдавались в массиве на 30 дней вперед начиная со значения поля равному сегодняшнему. Если для оптимизации кол-ва запросов нужно переписать функцию, а не пользоваться ей в цикле, то лучше так и сделать.

Далее пишем JS-обработчик, на отдельной HTML-странице, используя JQuery,
который вызывает эту функцию и складывает в массив. В JS-коде задать переменную N = 5. Сделать еще один массив, с теми же ключами, но в котором значение будет 1, если значение первого массива меньше N, и 0, если больше или равно N.

На фронте создать текстовое поле с календарем http://glad.github.io/glDatePicker/#examples. В календаре, должны быть доступны только будущие даты в том случае, если в новом массиве напротив нужной даты стоит значение 1.

Итогом является PHP-скрипт бекэнда и HTML-страница с правильно отображающимся календарем. В тестах необходимо довести нужное количество сделок с одной датой, чтобы в календаре хотя бы пару дней были неактивны.

SDK предоставлено компанией Интроверт. <br>
Документация и API-консоль платформы Yadro: https://bitbucket.org/mahatmaguru/intr-sdk-test/
